import{d as e,r as t,D as a,q as l,z as s,c as r,a as n,n as i,t as o,h as c,v as u,C as d,b as p,E as m,f as v,F as g,j as x,o as f}from"./index-UBkBa_uB.js";import{M as b}from"./mockData-BTL3WTnX.js";const h={class:"space-y-6"},y={class:"flex items-center justify-between"},w={class:"flex items-center space-x-3"},S={class:"flex items-center space-x-2"},k={class:"text-white text-sm font-medium"},M={class:"glass-card p-6 rounded-xl"},C={class:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-4"},L={class:"md:col-span-2"},D={class:"flex items-center"},E={class:"flex space-x-2"},j={class:"glass-card rounded-xl overflow-hidden"},H={class:"bg-white/5 border-b border-white/10 p-4 flex items-center justify-between"},U={class:"text-white font-semibold"},T={class:"flex items-center space-x-4 text-sm text-gray-400"},P={class:"p-4 space-y-1"},W={class:"text-gray-500 text-xs whitespace-nowrap"},A={class:"flex items-center space-x-1 min-w-0"},R={class:"flex items-center space-x-1 min-w-0"},I={class:"text-gray-400 text-xs uppercase whitespace-nowrap"},N={class:"text-white flex-1"},_={key:0,class:"text-center py-8 text-gray-400"},F={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},O={class:"glass-card p-4 rounded-xl"},V={class:"text-2xl font-bold text-white"},z={class:"glass-card p-4 rounded-xl"},$={class:"text-2xl font-bold text-white"},B={class:"glass-card p-4 rounded-xl"},q={class:"text-2xl font-bold text-white"},J={class:"glass-card p-4 rounded-xl"},Q={class:"text-2xl font-bold text-white"},G=e({__name:"ServerLogs",setup(e){const G=t([]),K=t(!0),X=t("all"),Y=t("all"),Z=t(""),ee=t(!0),te=t(),ae=t(),le=t(!1),se=()=>{K.value&&(G.value.push((()=>{const e=["info","warning","error","debug"],t=["MiningService","WebSocketHandler","SystemMonitor","ExternalService","DatabaseService","MiningCalculator"],a={MiningService:["Mining pool statistics updated successfully","New block found and validated","Pool difficulty adjusted automatically","Mining rewards distributed to participants","Hash rate calculation completed"],WebSocketHandler:["New miner connected successfully","WebSocket connection established","Real-time data stream initiated","Connection timeout handled gracefully","Mining status update broadcasted"],SystemMonitor:["High memory usage detected: 85%","CPU usage within normal parameters","Disk space check completed","Network latency monitoring active","System health check passed"],ExternalService:["Failed to connect to external API endpoint","Blockchain sync completed successfully","External wallet service responded","API rate limit warning received","Third-party service integration active"],DatabaseService:["Database backup completed successfully","Query optimization applied","Connection pool status healthy","Data integrity check passed","Transaction log rotated"],MiningCalculator:["Hash rate calculation: 15420 H/s","Difficulty adjustment calculated","Profitability metrics updated","Mining efficiency optimized","Performance benchmarks recorded"]},l=e[Math.floor(Math.random()*e.length)],s=t[Math.floor(Math.random()*t.length)],r=a[s][Math.floor(Math.random()*a[s].length)];return{id:`log_${Date.now()}_${Math.random()}`,timestamp:new Date,level:l,source:s,message:r}})()),G.value.length>200&&G.value.shift(),ie(),ee.value&&re())},re=()=>{te.value&&setTimeout((()=>{te.value.scrollTop=te.value.scrollHeight}),100)},ne=t([]),ie=()=>{ne.value=G.value.filter((e=>{const t="all"===X.value||e.level===X.value,a="all"===Y.value||e.source===Y.value,l=""===Z.value||e.message.toLowerCase().includes(Z.value.toLowerCase())||e.source.toLowerCase().includes(Z.value.toLowerCase());return t&&a&&l})).slice(-100)},oe=()=>{K.value=!K.value},ce=()=>{confirm("Are you sure you want to clear all logs? This action cannot be undone.")&&(G.value=[],ne.value=[])},ue=()=>{const e=JSON.stringify(ne.value,null,2),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download=`tribeminer-logs-${(new Date).toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(a)},de=e=>{switch(e){case"info":return"text-primary-400";case"warning":return"text-yellow-400";case"error":return"text-red-400";default:return"text-gray-400"}},pe=e=>{switch(e){case"info":return"fas fa-info-circle";case"warning":return"fas fa-exclamation-triangle";case"error":return"fas fa-times-circle";case"debug":return"fas fa-bug";default:return"fas fa-circle"}},me=e=>{switch(e){case"MiningService":return"fas fa-hammer";case"WebSocketHandler":return"fas fa-plug";case"SystemMonitor":return"fas fa-chart-line";case"ExternalService":return"fas fa-exchange-alt";case"DatabaseService":return"fas fa-database";case"MiningCalculator":return"fas fa-calculator";default:return"fas fa-file-alt"}};return a([X,Y,Z],(()=>{ie()})),l((async()=>{await(async()=>{le.value=!0;try{G.value=await b.getServerLogs(),ie()}catch(e){console.error("Failed to load server logs:",e)}finally{le.value=!1}})(),ae.value=window.setInterval(se,5e3)})),s((()=>{ae.value&&clearInterval(ae.value)})),(e,t)=>(f(),r("div",h,[n("div",y,[t[4]||(t[4]=n("div",null,[n("h1",{class:"text-3xl font-bold text-white mb-2"},"Server Logs"),n("p",{class:"text-gray-400"},"Real-time monitoring and system logs")],-1)),n("div",w,[n("div",S,[n("div",{class:i(["w-3 h-3 rounded-full",K.value?"bg-accent-green animate-pulse":"bg-gray-500"])},null,2),n("span",k,o(K.value?"Live":"Paused"),1)])])]),n("div",M,[n("div",C,[n("div",L,[t[5]||(t[5]=n("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Search Logs",-1)),c(n("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Z.value=e),type:"text",placeholder:"Search messages...",class:"w-full bg-white/5 border border-white/10 text-white placeholder-gray-400 px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},null,512),[[u,Z.value]])]),n("div",null,[t[7]||(t[7]=n("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Level",-1)),c(n("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>X.value=e),class:"w-full bg-white/5 border border-white/10 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},t[6]||(t[6]=[p('<option value="all">All Levels</option><option value="info">Info</option><option value="warning">Warning</option><option value="error">Error</option><option value="debug">Debug</option>',5)]),512),[[d,X.value]])]),n("div",null,[t[9]||(t[9]=n("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Source",-1)),c(n("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Y.value=e),class:"w-full bg-white/5 border border-white/10 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},t[8]||(t[8]=[p('<option value="all">All Sources</option><option value="MiningService">MiningService</option><option value="WebSocketHandler">WebSocketHandler</option><option value="SystemMonitor">SystemMonitor</option><option value="ExternalService">ExternalService</option><option value="DatabaseService">DatabaseService</option><option value="MiningCalculator">MiningCalculator</option>',7)]),512),[[d,Y.value]])]),n("div",null,[t[11]||(t[11]=n("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Auto Scroll",-1)),n("label",D,[c(n("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>ee.value=e),type:"checkbox",class:"mr-2 rounded bg-white/5 border-white/10 text-primary-500 focus:ring-primary-500/50"},null,512),[[m,ee.value]]),t[10]||(t[10]=n("span",{class:"text-white text-sm"},"Enable",-1))])]),n("div",null,[t[12]||(t[12]=n("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Actions",-1)),n("div",E,[n("button",{onClick:oe,class:i(["flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",K.value?"bg-red-600/20 text-red-300 hover:bg-red-600/30":"bg-accent-green/20 text-accent-green hover:bg-accent-green/30"])},o(K.value?"Pause":"Resume"),3)])])]),n("div",{class:"flex space-x-2"},[n("button",{onClick:ce,class:"btn-secondary text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2"},t[13]||(t[13]=[n("i",{class:"fas fa-trash"},null,-1),n("span",null,"Clear",-1)])),n("button",{onClick:ue,class:"btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2"},t[14]||(t[14]=[n("i",{class:"fas fa-download"},null,-1),n("span",null,"Export",-1)]))])]),n("div",j,[n("div",H,[n("h3",U," Server Logs ("+o(ne.value.length)+" entries) ",1),n("div",T,[n("span",null,"Total: "+o(G.value.length),1),n("span",null,"Filtered: "+o(ne.value.length),1)])]),n("div",{ref_key:"logsContainer",ref:te,class:"h-96 overflow-y-auto bg-black/20 font-mono text-sm"},[n("div",P,[(f(!0),r(g,null,x(ne.value,(e=>{return f(),r("div",{key:e.id,class:"flex items-start space-x-3 py-2 px-3 rounded hover:bg-white/5 transition-colors duration-200"},[n("span",W,o((t=e.timestamp,t.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}))),1),n("div",A,[n("i",{class:i([pe(e.level),de(e.level),"text-xs"])},null,2),n("span",{class:i([de(e.level),"text-xs uppercase font-semibold whitespace-nowrap"])},o(e.level),3)]),n("div",R,[n("i",{class:i([me(e.source),"text-gray-400 text-xs"])},null,2),n("span",I,o(e.source),1)]),n("span",N,o(e.message),1)]);var t})),128)),0===ne.value.length?(f(),r("div",_," No logs match the current filters ")):v("",!0)])],512)]),n("div",F,[n("div",O,[t[15]||(t[15]=n("div",{class:"flex items-center space-x-2 mb-2"},[n("i",{class:"fas fa-check-circle text-accent-green"}),n("span",{class:"text-gray-300 text-sm"},"Success")],-1)),n("p",V,o(G.value.filter((e=>"info"===e.level)).length),1)]),n("div",z,[t[16]||(t[16]=n("div",{class:"flex items-center space-x-2 mb-2"},[n("i",{class:"fas fa-exclamation-triangle text-yellow-400"}),n("span",{class:"text-gray-300 text-sm"},"Warning")],-1)),n("p",$,o(G.value.filter((e=>"warning"===e.level)).length),1)]),n("div",B,[t[17]||(t[17]=n("div",{class:"flex items-center space-x-2 mb-2"},[n("i",{class:"fas fa-times-circle text-red-400"}),n("span",{class:"text-gray-300 text-sm"},"Error")],-1)),n("p",q,o(G.value.filter((e=>"error"===e.level)).length),1)]),n("div",J,[t[18]||(t[18]=n("div",{class:"flex items-center space-x-2 mb-2"},[n("i",{class:"fas fa-clock text-gray-400"}),n("span",{class:"text-gray-300 text-sm"},"Last Hour")],-1)),n("p",Q,o(G.value.filter((e=>Date.now()-e.timestamp.getTime()<36e5)).length),1)])])]))}});export{G as default};
