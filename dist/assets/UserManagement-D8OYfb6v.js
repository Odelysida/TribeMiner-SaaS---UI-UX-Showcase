import{d as e,r as t,B as a,q as l,c as s,a as r,f as i,t as o,h as n,v as c,C as d,F as u,j as m,n as x,o as v}from"./index-UBkBa_uB.js";import{M as g}from"./mockData-BTL3WTnX.js";const p={class:"space-y-8"},f={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},b={class:"glass-card p-6 rounded-xl hover-lift"},h={class:"text-3xl font-bold text-white"},y={class:"glass-card p-6 rounded-xl hover-lift"},w={class:"text-3xl font-bold text-white"},A={class:"glass-card p-6 rounded-xl hover-lift"},k={class:"text-3xl font-bold text-white"},U={class:"glass-card p-6 rounded-xl hover-lift"},L={class:"text-3xl font-bold text-white"},C={class:"glass-card p-6 rounded-xl"},M={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},S={class:"md:col-span-2"},j={class:"glass-card rounded-xl overflow-hidden"},T={class:"overflow-x-auto"},F={class:"w-full"},D={class:"p-4"},R={class:"flex items-center space-x-3"},V=["src","alt"],B={class:"text-white font-medium"},E={class:"text-gray-400 text-sm"},z={class:"p-4"},H={class:"p-4"},J={class:"flex items-center space-x-2"},_={class:"p-4"},q={class:"text-white font-medium"},I={class:"p-4"},N={class:"text-white"},W={class:"p-4"},G={class:"text-gray-300 text-sm"},K={class:"p-4"},O={class:"flex items-center space-x-2"},P=["onClick"],Q=["onClick"],X=["onClick"],Y=["onClick"],Z={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"},$={class:"glass-card max-w-2xl w-full rounded-xl p-6"},ee={key:0,class:"space-y-6"},te={class:"flex items-center space-x-4"},ae=["src","alt"],le={class:"text-xl font-semibold text-white"},se={class:"text-gray-400"},re={class:"flex items-center space-x-2 mt-2"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oe={class:"bg-white/5 p-4 rounded-lg"},ne={class:"text-white font-mono text-sm"},ce={class:"bg-white/5 p-4 rounded-lg"},de={class:"text-white font-semibold"},ue={class:"bg-white/5 p-4 rounded-lg"},me={class:"text-white"},xe={class:"bg-white/5 p-4 rounded-lg"},ve={class:"text-white"},ge=e({__name:"UserManagement",setup(e){const ge=t([]),pe=t(!1),fe=t(""),be=t(""),he=t("all"),ye=t("all"),we=t("createdAt"),Ae=t("desc"),ke=a((()=>{let e=ge.value.filter((e=>{const t=e.username.toLowerCase().includes(be.value.toLowerCase())||e.email.toLowerCase().includes(be.value.toLowerCase()),a="all"===he.value||e.role===he.value,l="all"===ye.value||"active"===ye.value&&e.isActive||"inactive"===ye.value&&!e.isActive;return t&&a&&l}));return e.sort(((e,t)=>{let a,l;switch(we.value){case"username":a=e.username.toLowerCase(),l=t.username.toLowerCase();break;case"createdAt":a=e.createdAt.getTime(),l=t.createdAt.getTime();break;case"totalMined":a=e.totalMined,l=t.totalMined;break;case"lastLogin":a=e.lastLogin.getTime(),l=t.lastLogin.getTime();break;default:return 0}return a<l?"asc"===Ae.value?-1:1:a>l?"asc"===Ae.value?1:-1:0})),e})),Ue=a((()=>ge.value.length)),Le=a((()=>ge.value.filter((e=>e.isActive)).length)),Ce=a((()=>ge.value.reduce(((e,t)=>e+t.totalMined),0))),Me=t(null),Se=t(!1),je=async()=>{pe.value=!0,fe.value="";try{ge.value=await g.getUsers()}catch(e){fe.value="Failed to load users",console.error("Failed to load users:",e)}finally{pe.value=!1}},Te=()=>{Me.value=null,Se.value=!1},Fe=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),De=e=>e?"text-accent-green":"text-red-400",Re=e=>e?"active":"banned";return l((()=>{je()})),(e,t)=>{var a;return v(),s("div",p,[t[30]||(t[30]=r("div",{class:"flex items-center justify-between"},[r("div",null,[r("h1",{class:"text-3xl font-bold text-white mb-2"},"User Management"),r("p",{class:"text-gray-400"},"Manage all TribeMiner users and their mining activities")])],-1)),r("div",f,[r("div",b,[t[4]||(t[4]=r("div",{class:"flex items-center justify-between mb-4"},[r("h3",{class:"text-gray-300 font-medium"},"Total Users"),r("div",{class:"p-2 bg-primary-500/20 rounded-lg glow-blue"},[r("i",{class:"fas fa-users text-primary-400"})])],-1)),r("p",h,o(Ue.value),1),t[5]||(t[5]=r("p",{class:"text-gray-400 text-sm"},"All registered users",-1))]),r("div",y,[t[6]||(t[6]=r("div",{class:"flex items-center justify-between mb-4"},[r("h3",{class:"text-gray-300 font-medium"},"Active Users"),r("div",{class:"p-2 bg-accent-green/20 rounded-lg glow-teal"},[r("i",{class:"fas fa-user-check text-accent-green"})])],-1)),r("p",w,o(Le.value),1),t[7]||(t[7]=r("p",{class:"text-gray-400 text-sm"},"Currently active",-1))]),r("div",A,[t[8]||(t[8]=r("div",{class:"flex items-center justify-between mb-4"},[r("h3",{class:"text-gray-300 font-medium"},"Total Earnings"),r("div",{class:"p-2 bg-accent-teal/20 rounded-lg glow-teal"},[r("i",{class:"fas fa-coins text-accent-teal"})])],-1)),r("p",k,o(Ce.value.toLocaleString()),1),t[9]||(t[9]=r("p",{class:"text-gray-400 text-sm"},"AUM tokens earned",-1))]),r("div",U,[t[10]||(t[10]=r("div",{class:"flex items-center justify-between mb-4"},[r("h3",{class:"text-gray-300 font-medium"},"Mining Rate"),r("div",{class:"p-2 bg-purple-500/20 rounded-lg glow-purple"},[r("i",{class:"fas fa-tachometer-alt text-purple-400"})])],-1)),r("p",L,o(ge.value.filter((e=>e.isActive)).reduce(((e,t)=>e+t.totalMined),0)),1),t[11]||(t[11]=r("p",{class:"text-gray-400 text-sm"},"Total H/s",-1))])]),r("div",C,[r("div",M,[r("div",S,[t[12]||(t[12]=r("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Search Users",-1)),n(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>be.value=e),type:"text",placeholder:"Search by username or email...",class:"w-full bg-white/5 border border-white/10 text-white placeholder-gray-400 px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},null,512),[[c,be.value]])]),r("div",null,[t[14]||(t[14]=r("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Role",-1)),n(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>he.value=e),class:"w-full bg-white/5 border border-white/10 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},t[13]||(t[13]=[r("option",{value:"all"},"All Roles",-1),r("option",{value:"admin"},"Admin",-1),r("option",{value:"customer"},"Customer",-1)]),512),[[d,he.value]])]),r("div",null,[t[16]||(t[16]=r("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Status",-1)),n(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>ye.value=e),class:"w-full bg-white/5 border border-white/10 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},t[15]||(t[15]=[r("option",{value:"all"},"All Status",-1),r("option",{value:"active"},"Active",-1),r("option",{value:"inactive"},"Inactive",-1),r("option",{value:"banned"},"Banned",-1)]),512),[[d,ye.value]])]),r("div",null,[t[18]||(t[18]=r("label",{class:"block text-gray-300 text-sm font-medium mb-2"},"Sort By",-1)),n(r("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>we.value=e),class:"w-full bg-white/5 border border-white/10 text-white px-4 py-2 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},t[17]||(t[17]=[r("option",{value:"createdAt"},"Join Date",-1),r("option",{value:"username"},"Username",-1),r("option",{value:"earnings"},"Earnings",-1),r("option",{value:"lastLogin"},"Last Login",-1)]),512),[[d,we.value]])])])]),r("div",j,[r("div",T,[r("table",F,[t[23]||(t[23]=r("thead",{class:"bg-white/5 border-b border-white/10"},[r("tr",null,[r("th",{class:"text-left p-4 text-gray-300 font-medium"},"User"),r("th",{class:"text-left p-4 text-gray-300 font-medium"},"Role"),r("th",{class:"text-left p-4 text-gray-300 font-medium"},"Status"),r("th",{class:"text-left p-4 text-gray-300 font-medium"},"Earnings"),r("th",{class:"text-left p-4 text-gray-300 font-medium"},"Hash Rate"),r("th",{class:"text-left p-4 text-gray-300 font-medium"},"Last Login"),r("th",{class:"text-left p-4 text-gray-300 font-medium"},"Actions")])],-1)),r("tbody",null,[(v(!0),s(u,null,m(ke.value,(e=>{return v(),s("tr",{key:e.id,class:"border-b border-white/5 hover:bg-white/5 transition-colors duration-200"},[r("td",D,[r("div",R,[r("img",{src:e.avatar,alt:e.username,class:"w-10 h-10 rounded-full"},null,8,V),r("div",null,[r("p",B,o(e.username),1),r("p",E,o(e.email),1)])])]),r("td",z,[r("span",{class:x(["text-xs px-2 py-1 rounded-full border","admin"===e.role?"bg-red-500/20 text-red-300 border-red-500/30":"bg-primary-500/20 text-primary-300 border-primary-500/30"])},o(e.role),3)]),r("td",H,[r("div",J,[r("i",{class:x([(a=e.isActive,a?"fas fa-check-circle":"fas fa-ban"),De(e.isActive)])},null,2),r("span",{class:x([De(e.isActive),"capitalize font-medium"])},o(Re(e.isActive)),3)])]),r("td",_,[r("span",q,o(e.totalMined.toLocaleString())+" AUM",1)]),r("td",I,[r("span",N,o(e.totalMined)+" H/s",1)]),r("td",W,[r("span",G,o(Fe(e.lastLogin)),1)]),r("td",K,[r("div",O,[r("button",{onClick:t=>(e=>{Me.value=e,Se.value=!0})(e),class:"text-primary-400 hover:text-primary-300 transition-colors duration-200",title:"View Details"},t[19]||(t[19]=[r("i",{class:"fas fa-eye"},null,-1)]),8,P),e.isActive&&"admin"!==e.role?(v(),s("button",{key:0,onClick:t=>(async e=>{try{await g.updateUser(e,{isActive:!1}),await je()}catch(t){console.error("Failed to ban user:",t),alert("Failed to ban user")}})(e.id),class:"text-red-400 hover:text-red-300 transition-colors duration-200",title:"Ban User"},t[20]||(t[20]=[r("i",{class:"fas fa-ban"},null,-1)]),8,Q)):i("",!0),e.isActive?i("",!0):(v(),s("button",{key:1,onClick:t=>(async e=>{try{await g.updateUser(e,{isActive:!0}),await je()}catch(t){console.error("Failed to unban user:",t),alert("Failed to unban user")}})(e.id),class:"text-accent-green hover:text-green-300 transition-colors duration-200",title:"Unban User"},t[21]||(t[21]=[r("i",{class:"fas fa-check"},null,-1)]),8,X)),"admin"!==e.role?(v(),s("button",{key:2,onClick:t=>(async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await g.deleteUser(e),await je()}catch(t){console.error("Failed to delete user:",t),alert("Failed to delete user")}})(e.id),class:"text-red-400 hover:text-red-300 transition-colors duration-200",title:"Delete User"},t[22]||(t[22]=[r("i",{class:"fas fa-trash"},null,-1)]),8,Y)):i("",!0)])])]);var a})),128))])])])]),Se.value?(v(),s("div",Z,[r("div",$,[r("div",{class:"flex items-center justify-between mb-6"},[t[25]||(t[25]=r("h2",{class:"text-2xl font-bold text-white"},"User Details",-1)),r("button",{onClick:Te,class:"text-gray-400 hover:text-white transition-colors duration-200"},t[24]||(t[24]=[r("i",{class:"fas fa-times text-xl"},null,-1)]))]),Me.value?(v(),s("div",ee,[r("div",te,[r("img",{src:Me.value.avatar,alt:Me.value.username,class:"w-16 h-16 rounded-full"},null,8,ae),r("div",null,[r("h3",le,o(Me.value.username),1),r("p",se,o(Me.value.email),1),r("div",re,[r("span",{class:x(["text-xs px-2 py-1 rounded-full border","admin"===Me.value.role?"bg-red-500/20 text-red-300 border-red-500/30":"bg-primary-500/20 text-primary-300 border-primary-500/30"])},o(Me.value.role),3),r("span",{class:x(["text-xs px-2 py-1 rounded-full border capitalize",{"bg-accent-green/20 text-accent-green border-accent-green/30":Me.value.isActive,"bg-red-500/20 text-red-300 border-red-500/30":!Me.value.isActive}])},o(Re(Me.value.isActive)),3)])])]),r("div",ie,[r("div",oe,[t[26]||(t[26]=r("label",{class:"text-gray-400 text-sm"},"Wallet Address",-1)),r("p",ne,o(Me.value.walletAddress||"Not connected"),1)]),r("div",ce,[t[27]||(t[27]=r("label",{class:"text-gray-400 text-sm"},"Total Earnings",-1)),r("p",de,o((null==(a=Me.value.totalMined)?void 0:a.toLocaleString())||0)+" AUM",1)]),r("div",ue,[t[28]||(t[28]=r("label",{class:"text-gray-400 text-sm"},"Join Date",-1)),r("p",me,o(Fe(Me.value.createdAt)),1)]),r("div",xe,[t[29]||(t[29]=r("label",{class:"text-gray-400 text-sm"},"Last Login",-1)),r("p",ve,o(Fe(Me.value.lastLogin)),1)])])])):i("",!0)])])):i("",!0)])}}});export{ge as default};
