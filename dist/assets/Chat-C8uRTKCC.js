import{d as e,e as a,r as t,B as s,q as r,c as l,a as i,k as n,F as o,j as c,t as u,g as d,b as m,n as v,f,w as p,h as x,v as g,o as h,s as b}from"./index-UBkBa_uB.js";import{M as y}from"./mockData-BTL3WTnX.js";const w={class:"h-screen flex overflow-hidden"},k={class:"w-80 glass-card border-r border-white/10 flex flex-col"},C={class:"p-4 border-b border-white/10"},T={class:"space-y-1"},M=["onClick"],S={class:"font-medium"},_={key:0,class:"ml-auto w-2 h-2 bg-accent-green rounded-full animate-pulse"},j={class:"flex-1 p-4 overflow-y-auto"},F={class:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3"},A={class:"space-y-2"},B={class:"flex items-center space-x-3 p-2 rounded-lg bg-white/5"},U={class:"relative"},D=["src","alt"],G={class:"flex-1 min-w-0"},I={class:"text-white text-sm font-medium truncate"},q={class:"relative"},H=["src","alt"],O={class:"flex-1 min-w-0"},z={class:"text-white text-sm font-medium truncate"},L={class:"text-xs text-gray-400 capitalize"},V={class:"flex-1 flex flex-col"},W={class:"glass-card border-b border-white/10 p-4"},Y={class:"flex items-center justify-between"},$={class:"flex items-center space-x-3"},E={class:"text-xl font-bold text-white"},J={class:"text-gray-400 text-sm"},K=["src","alt"],N={class:"flex-1 min-w-0"},P={class:"flex items-center space-x-2 mb-1"},Q={class:"text-xs text-gray-500"},R={class:"text-gray-200 break-words"},X={key:0,class:"flex items-center space-x-2 text-gray-400 text-sm"},Z={class:"glass-card border-t border-white/10 p-4"},ee={class:"flex-1 relative"},ae=["disabled"],te=e({__name:"Chat",setup(e){const te=a(),se=t(""),re=t("general"),le=t(!1),ie=t(),ne=t(!1),oe=t([]),ce=t([{id:"general",name:"General",icon:"fas fa-comments",color:"text-primary-400"},{id:"mining",name:"Mining",icon:"fas fa-hammer",color:"text-accent-teal"},{id:"support",name:"Support",icon:"fas fa-headset",color:"text-purple-400"},{id:"announcements",name:"Announcements",icon:"fas fa-bullhorn",color:"text-yellow-400"}]),ue=t([{username:"alice_miner",status:"mining",avatar:"https://ui-avatars.com/api/?name=Alice&background=10b981&color=fff"},{username:"user",status:"active",avatar:"https://ui-avatars.com/api/?name=User&background=8b5cf6&color=fff"},{username:"charlie_dev",status:"mining",avatar:"https://ui-avatars.com/api/?name=Charlie&background=ef4444&color=fff"},{username:"bob_crypto",status:"away",avatar:"https://ui-avatars.com/api/?name=Bob&background=f59e0b&color=fff"},{username:"admin",status:"active",avatar:"https://ui-avatars.com/api/?name=Admin&background=3b82f6&color=fff"}]),de=t(),me=s((()=>oe.value.sort(((e,a)=>e.timestamp.getTime()-a.timestamp.getTime())))),ve=async()=>{if(se.value.trim()&&te.user)try{const e=await y.sendChatMessage(te.user.id,se.value);oe.value.push(e),se.value="",await b(),fe(),setTimeout((()=>{const e=["Welcome to the mining pool!","Great to see new miners joining!","Feel free to ask any questions.","Happy mining!"],a={id:Date.now().toString()+"_bot",userId:"bot",username:"TribeBot",message:e[Math.floor(Math.random()*e.length)],timestamp:new Date,avatar:"https://ui-avatars.com/api/?name=Bot&background=6366f1&color=fff"};oe.value.push(a),fe()}),1e3+2e3*Math.random())}catch(e){console.error("Failed to send message:",e)}},fe=()=>{de.value&&(de.value.scrollTop=de.value.scrollHeight)},pe=e=>{switch(e){case"mining":return"bg-accent-green";case"active":return"bg-primary-400";case"away":return"bg-yellow-400";default:return"bg-gray-500"}},xe=()=>{le.value=!0,ie.value&&clearTimeout(ie.value),ie.value=window.setTimeout((()=>{le.value=!1}),2e3)};return r((async()=>{await(async()=>{ne.value=!0;try{oe.value=await y.getChatMessages()}catch(e){console.error("Failed to load chat messages:",e)}finally{ne.value=!1}})(),fe()})),(e,a)=>{var t,s,r,y,ie,ne;return h(),l("div",w,[i("div",k,[i("div",C,[a[1]||(a[1]=i("h3",{class:"text-lg font-semibold text-white mb-4 flex items-center"},[i("i",{class:"fas fa-comments text-primary-400 mr-2"}),n(" Channels ")],-1)),i("div",T,[(h(!0),l(o,null,c(ce.value,(e=>(h(),l("div",{key:e.id,onClick:a=>{return t=e.id,re.value=t,void b((()=>fe()));var t},class:v(["flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",{"bg-primary-500/20 text-primary-300":re.value===e.id,"text-gray-300 hover:bg-white/10 hover:text-white":re.value!==e.id}])},[i("i",{class:v([e.icon,e.color])},null,2),i("span",S,"# "+u(e.name),1),me.value.length>0&&re.value!==e.id?(h(),l("span",_)):f("",!0)],10,M)))),128))])]),i("div",j,[i("h4",F," Online Users ("+u(ue.value.length)+") ",1),i("div",A,[i("div",B,[i("div",U,[i("img",{src:null==(t=d(te).user)?void 0:t.avatar,alt:null==(s=d(te).user)?void 0:s.username,class:"w-8 h-8 rounded-full"},null,8,D),a[2]||(a[2]=i("div",{class:"absolute -bottom-1 -right-1 w-3 h-3 bg-accent-green rounded-full border-2 border-gray-900"},null,-1))]),i("div",G,[i("p",I,u(null==(r=d(te).user)?void 0:r.username)+" (You)",1),a[3]||(a[3]=i("p",{class:"text-xs text-accent-green"},"Online",-1))])]),(h(!0),l(o,null,c(ue.value,(e=>(h(),l("div",{key:e.username,class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-white/5 transition-colors duration-200"},[i("div",q,[i("img",{src:e.avatar,alt:e.username,class:"w-8 h-8 rounded-full"},null,8,H),i("div",{class:v([pe(e.status),"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-gray-900"])},null,2)]),i("div",O,[i("p",z,u(e.username),1),i("p",L,u(e.status),1)])])))),128))])])]),i("div",V,[i("div",W,[i("div",Y,[i("div",$,[i("i",{class:v([null==(y=ce.value.find((e=>e.id===re.value)))?void 0:y.icon,null==(ie=ce.value.find((e=>e.id===re.value)))?void 0:ie.color,"text-xl"])},null,2),i("div",null,[i("h2",E,"# "+u(null==(ne=ce.value.find((e=>e.id===re.value)))?void 0:ne.name),1),i("p",J,u(me.value.length)+" messages",1)])]),a[4]||(a[4]=m('<div class="flex items-center space-x-2"><button class="p-2 text-gray-400 hover:text-white transition-colors duration-200"><i class="fas fa-search"></i></button><button class="p-2 text-gray-400 hover:text-white transition-colors duration-200"><i class="fas fa-cog"></i></button></div>',1))])]),i("div",{ref_key:"messagesContainer",ref:de,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-black/20"},[(h(!0),l(o,null,c(me.value,(e=>{var t,s;return h(),l("div",{key:e.id,class:"flex space-x-3 group"},[i("img",{src:e.avatar||`https://ui-avatars.com/api/?name=${e.username}&background=6b7280&color=fff`,alt:e.username,class:"w-10 h-10 rounded-full flex-shrink-0"},null,8,K),i("div",N,[i("div",P,[i("span",{class:v(["font-semibold text-white",{"text-primary-400":e.username===(null==(t=d(te).user)?void 0:t.username)}])},u(e.username),3),i("span",Q,u((s=e.timestamp,s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))),1)]),i("div",R,u(e.message),1)]),a[5]||(a[5]=m('<div class="opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-start space-x-1"><button class="p-1 text-gray-500 hover:text-white transition-colors duration-200"><i class="fas fa-reply text-xs"></i></button><button class="p-1 text-gray-500 hover:text-white transition-colors duration-200"><i class="fas fa-heart text-xs"></i></button></div>',1))])})),128)),le.value?(h(),l("div",X,a[6]||(a[6]=[i("div",{class:"flex space-x-1"},[i("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),i("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),i("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})],-1),i("span",null,"Someone is typing...",-1)]))):f("",!0)],512),i("div",Z,[i("form",{onSubmit:p(ve,["prevent"]),class:"flex space-x-3"},[i("div",ee,[x(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>se.value=e),onInput:xe,type:"text",placeholder:"Type a message...",class:"w-full bg-white/5 border border-white/10 text-white placeholder-gray-400 px-4 py-3 pr-12 rounded-lg focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 transition-all duration-200"},null,544),[[g,se.value]]),a[7]||(a[7]=i("button",{type:"button",class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors duration-200"},[i("i",{class:"fas fa-smile"})],-1))]),i("button",{type:"submit",disabled:!se.value.trim(),class:"bg-primary-500 hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2"},a[8]||(a[8]=[i("i",{class:"fas fa-paper-plane"},null,-1),i("span",{class:"hidden sm:inline"},"Send",-1)]),8,ae)],32),a[9]||(a[9]=m('<div class="mt-3 flex items-center space-x-4 text-sm text-gray-400"><button class="hover:text-white transition-colors duration-200"><i class="fas fa-paperclip mr-1"></i> Attach </button><button class="hover:text-white transition-colors duration-200"><i class="fas fa-gif mr-1"></i> GIF </button><button class="hover:text-white transition-colors duration-200"><i class="fas fa-code mr-1"></i> Code </button></div>',1))])])])}}});export{te as default};
